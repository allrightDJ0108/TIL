# 📌 Today I Learned : 2024.03.12

<br>

## Today Tasks

- [ ]  


<br>

## Upcoming Tasks

- [ ]  

<br>

## 새롭게 알게된 내용

## 프로세스

### 프로그램

- 특정 작업을 수행하기 위한 명령어의 집합

### 프로세스

- 실행중인 하나의 프로그램
    - 실행중인 명령어의 집합
- 프로세스의 구성
    - 스택 : 지역변수, 매개변수, 반환될 주소 (LIFO)
    - 힙 : 동적 메모리 할당 (FIFO)
    - 데이터 : 전역변수, 정적변수, 배열, 구조체
    - 코드 : 실행할 코드 (기계어)

  스택과 힙은 동적 할당 부분으로 둘 사이에 빈 메모리가 존재한다.

  침범 시 스택 오버플로, 힙 오버플로


### 스레드

- 프로세스에서 **실제로 실행되는 흐름** 단위
- 프로세스의 메모리 공간 이용
- 스택 영역에 할당
- **힙 영역을 공유**

### PCB Process Control Block

- OS가 프로세스를 제어하기 위해 저장하는 **프로세스 정보**
- 프로세스 **상태**, **PID**, 부모 PID, 자식 PID, PC, 프로세스 우선순위, 메모리 제한 저장

## 프로세스의 생성과 종료

### 프로세스의 생성

새로운 프로세스는 기존 프로세스에서 fork()를 호출해 생성한다.

기존 프로세스를 **복사하여 자식 프로세스로 지정**한다.

fork() 호출 시 부모 프로세스는 **자식 프로세스의 PID 값**을, **자식 프로세스는 0**을 반환

### 프로세스의 종료

- 정상적 종료
- 제한시간 초과
- 오류 발생 / 메모리 부족
- 부모가 자식을 종료
    - 할당 자원 초과 사용 시 종료
    - 할당 자원이 없을 시 종료

## 프로세스 상태도

- 생성, 준비, 대기, 실행, 종료

## 멀티 프로세스와 멀티 스레드

### 동시성

- 싱글 코어에서 여러 작업을 번갈아 처리

### 병렬성

- 멀티 코어에서 각각의 작업을 동시에 처리

### 멀티 프로세스

- 한 프로세스가 죽어도 다른 프로세스에 영향이 가지 않음
- 각 프로세스는 독립적인 메모리를 할당받음
- 안정적 / 시간, 메모리 낭비, 오버헤드 발생, IPC 사용 필요
    - 오버헤드

      : CPU가 기존에 처리하던 프로세스의 메모리 영역을 다른 프로세스에서 사용할 수 있게 **교체하면서 필요한 시간과 메모리**

    - IPC Inter Process Communication

      : 프로세스 간에 **자원을 공유**하는 방식

        - 공유 메모리 : 프로세스 간 공유 메모리를 구성해 자원을 공유 / 동기화 문제 발생
        - 소켓 : 네트워크 소켓 사용 (클라이언트 - 서버)
        - 세마포어 : 접근하는 프로세스를 제어해 공유자원 관리
        - 파이프  : FIFO 형태 파이프 사용
        - 메시지 큐 : FIFO 형태 큐 사용

### 콘텍스트 스위칭

- 멀티 프로세스 환경에서 CPU가 처리중인 프로세스의 정보를 교체하는 것
- 멀티 프로세스 처리 시 CPU 스케줄러에 의한 인터럽트가 발생하면서 콘텍스트 스위칭이 이루어진다.
- 인터럽트가 발생하는 경우
    - 입출력 발생
    - CPU 사용시간 만료
    - 자식 프로세스 생성

### 멀티 스레드

- 스레드를 여러개 생성해 각자 다른 작업 처리
- 스레드 간에는 **힙, 데이터, 코드 영역을 공유**
    - 오버헤드 감소, IPC 불필요
    - 처리비용 감소, 응답시간 감소
    - **멀티 프로세스보다 효율이 높다.**

## 프로세스 동기화

### 경쟁상태

- 공유자원에 동시에 접근해 경쟁하는 상태

### 임계영역

- 공유 자원에 접근할 수 있고 접근 순서에 따라 결과가 달라지는 코드 영역

### 프로세스 동기화

- 임계영역에서 경쟁상태가 발생하는 것을 방지하기 위해
  **여러 프로세스가 공유 자원에 접근해도 데이터의 일관성이 유지**되도록 하는 것

### 임계영역에 동시 접근 방지 조건

1. 상호배제 기법
    - 어떤 프로세스가 임계영역을 실행중일 때 다른 프로세스가 접근할 수 없다
    - 뮤텍스 : 락을 가진 프로세스만이 공유자원에 접근할 수 있는 방법
    - 세마포어 : 공유자원에 접근할 수 있는 프로세스의 수를 정해 접근 제어
2. 진행
    - 임계영역을 실행중인 프로세스가 없을 때 다른 프로세스가 임계영역을 실행한다.
3. 한정된 대기
    - 임계영역에 접근 요청 시 무한한 시간을 기다리지 않는다

## 교착상태

### 교착상태

- 2개 이상의 프로세스가 각각 자원을 보유한 상태로 서로의 자원을 요구하며 기다리는 상태

### 교착상태가 발생하는 필요충분조건

필요충분조건에서 한 가지를 제거하면 교착상태를 막을 수 있다.

- 상호배제 mutual exclusion
    - 하나의 공유 자원에 하나의 프로세스만 접근 가능
- 점유와대기 hold and wait
    - 하나의 프로세스가 자원을 가진 상태에서 다른 프로세스의 자원을 기다리는 상황
    - 문제 해결 : 프로세스가 자원을 요구할 때 필요한 자원 1과 2를 모두 주거나 가진 자원이 없는 경우에만 자원을 할당하도록 함
- 비선점 non-preemption
    - 다른 프로세스가 가진 자원을 뺏을 수 없다
    - 문제 해결 : 프로세스 1이 프로세스 2의 자원을 뺏을 수 있게 함
- 환형대기 circular wait
    - 프로세스 1이 프로세스 2의 자원을 요구하고 프로세스 2가 프로세스 1의 자원을 요구하는 상황
    - 문제 해결 : 작은 번호 프로세스가 큰 번호 프로세스의 자원을 요구하는 것만 가능하게 함


## 좀비 프로세스와 고아 프로세스

### 좀비 프로세스

- 자식 프로세스가 종료되었지만 부모 프로세스가 자식 프로세스의 종료 상태를 회수하지 않아 남겨진 자식 프로세스
- 자원이 낭비된다.

### 고아 프로세스

- 부모 프로세스가 자식 프로세스보다 먼저 종료된 경우의 자식 프로세스
- 자식 프로세스의 부모 PID를 init 프로세스로 변경, 종료 시 init 프로세스가 자원을 회수해 좀비가 되는 것을 방지
    - init 프로세스 : 부팅 시 가장 먼저 실행되는 프로세스


<br>

## 오늘의 느낀점
```


```
